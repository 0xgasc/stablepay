<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-i18n="title">StablePay Integration Demo</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * {
            font-family: 'Space Grotesk', sans-serif;
        }
        body {
            background: linear-gradient(135deg, #00E5FF 0%, #4FC3F7 50%, #7C4DFF 100%);
            font-family: 'Space Grotesk', sans-serif;
        }
        body.night-mode {
            background: linear-gradient(135deg, #1a1a1a 0%, #2a2a2a 50%, #1a1a1a 100%);
            color: #fff;
        }
        body.night-mode .bg-white {
            background: #000 !important;
        }
        body.night-mode .text-black {
            color: #fff !important;
        }

        body.night-mode header .text-black,
        body.night-mode nav .text-black,
        body.night-mode header a,
        body.night-mode nav a,
        body.night-mode header span,
        body.night-mode nav span {
            color: #fff !important;
        }
        body.night-mode .text-gray-700 {
            color: #ccc !important;
        }
        body.night-mode .text-gray-600 {
            color: #ccc !important;
        }
        body.night-mode .text-gray-500 {
            color: #888 !important;
        }
        body.night-mode .text-gray-400 {
            color: #999 !important;
        }
        body.night-mode .brutal-border,
        body.night-mode .border-black {
            border-color: #fff !important;
        }
        body.night-mode [style*="box-shadow"][style*="#000"] {
            box-shadow: 8px 8px 0px #fff !important;
        }
        body.night-mode .shadow-brutal {
            box-shadow: 8px 8px 0px #fff !important;
        }
        .brutal-border {
            border: 4px solid #000;
        }
        .shadow-brutal {
            box-shadow: 8px 8px 0px #000;
        }
        .btn-brutal {
            border: 4px solid #000;
            text-transform: uppercase;
            font-weight: 700;
            letter-spacing: 0.05em;
            transition: all 0.2s;
        }
        .btn-brutal:hover {
            transform: translate(4px, 4px);
            box-shadow: 4px 4px 0px #000;
        }
        body.night-mode .btn-brutal {
            border-color: #fff;
        }
        body.night-mode .btn-brutal:hover {
            box-shadow: 4px 4px 0px #fff;
        }
        input, select {
            border: 4px solid #000;
            border-radius: 0;
        }
        body.night-mode input,
        body.night-mode select {
            border-color: #fff;
            background: #000;
            color: #fff;
        }
        pre {
            border: 4px solid #000;
            background: #000;
            color: #00E5FF;
            padding: 20px;
            overflow-x: auto;
            font-family: 'Monaco', 'Courier New', monospace;
        }
        body.night-mode pre {
            border-color: #fff;
            color: #00E5FF;
        }
        .tab-btn {
            border-bottom: 4px solid transparent;
        }
        .tab-btn.active {
            border-bottom-color: #00E5FF;
        }
        body.night-mode .tab-btn.active {
            border-bottom-color: #fff;
        }
        .integration-type {
            transition: all 0.2s;
            cursor: pointer;
        }
        .integration-type:hover {
            transform: translate(2px, 2px);
        }
        .integration-type.active {
            background: #00E5FF !important;
        }
        body.night-mode .integration-type.active {
            background: #7C4DFF !important;
        }
    </style>
</head>
<body class="min-h-screen flex items-center justify-center p-5">
    <!-- Language & Night Mode Fixed Position -->
    <div class="fixed top-4 right-4 flex items-center gap-3 z-50">
        <select id="languageSelector" class="px-3 py-2 bg-white text-black font-bold text-sm">
            <option value="en">EN</option>
            <option value="es">ES</option>
            <option value="fr">FR</option>
            <option value="pt">PT</option>
        </select>
        <button id="nightModeToggle" class="px-4 py-2 bg-white text-black font-bold text-sm btn-brutal">
            <span class="night-icon">NIGHT</span>
        </button>
    </div>

    <div class="container max-w-7xl">
        <div class="text-center mb-10">
            <h1 class="text-6xl font-bold text-white mb-3 tracking-tight" style="text-transform: uppercase;" data-i18n="heading">
                STABLEPAY INTEGRATION DEMO
            </h1>
            <p class="text-xl text-white" data-i18n="subheading">
                See how easy it is to accept USDC payments on any chain
            </p>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
            <!-- Left: Integration Options -->
            <div class="bg-white border-4 border-black p-8 shadow-brutal">
                <h2 class="text-3xl font-bold mb-4 text-black tracking-wide" style="text-transform: uppercase;" data-i18n="options.heading">CHOOSE YOUR INTEGRATION</h2>
                <p class="text-gray-700 mb-6" data-i18n="options.subheading">Three ways to integrate StablePay checkout</p>

                <div class="grid grid-cols-3 gap-4 mb-8">
                    <div class="integration-type active border-4 border-black p-4 text-center bg-white" data-type="widget">
                        <div class="text-3xl mb-2">★</div>
                        <div class="font-bold text-sm text-black" style="text-transform: uppercase;" data-i18n="options.widget">WIDGET</div>
                    </div>
                    <div class="integration-type border-4 border-black p-4 text-center bg-white" data-type="hosted">
                        <div class="text-3xl mb-2">◆</div>
                        <div class="font-bold text-sm text-black" style="text-transform: uppercase;" data-i18n="options.hosted">HOSTED</div>
                    </div>
                    <div class="integration-type border-4 border-black p-4 text-center bg-white" data-type="api">
                        <div class="text-3xl mb-2">■</div>
                        <div class="font-bold text-sm text-black" style="text-transform: uppercase;" data-i18n="options.api">API</div>
                    </div>
                </div>

                <div id="widget-content" class="content-section">
                    <h3 class="text-2xl font-bold mb-3 text-black tracking-wide" style="text-transform: uppercase;" data-i18n="widget.heading">EMBEDDED WIDGET</h3>
                    <p class="text-gray-700 mb-4" data-i18n="widget.description">Add checkout directly to your website with one script tag.</p>

                    <div class="flex gap-2 mb-4">
                        <button class="tab-btn active px-4 py-2 font-bold text-sm text-black" data-tab="html">HTML</button>
                        <button class="tab-btn px-4 py-2 font-bold text-sm text-black" data-tab="react">REACT</button>
                        <button class="tab-btn px-4 py-2 font-bold text-sm text-black" data-tab="vue">VUE</button>
                    </div>

                    <div id="html-tab" class="tab-content">
                        <pre><code>&lt;!-- 1. Include the script --&gt;
&lt;script src="https://stablepay.com/checkout.js"&gt;&lt;/script&gt;

&lt;!-- 2. Add the widget --&gt;
&lt;div class="stablepay-checkout"
     data-merchant="YOUR_ID"
     data-amount="10.00"
     data-chain="BASE_SEPOLIA"&gt;
&lt;/div&gt;</code></pre>
                    </div>

                    <div id="react-tab" class="tab-content hidden">
                        <pre><code>import { useEffect } from 'react';

function Checkout() {
  useEffect(() => {
    const script = document.createElement('script');
    script.src = 'https://stablepay.com/checkout.js';
    document.body.appendChild(script);
  }, []);

  return (
    &lt;div className="stablepay-checkout"
         data-merchant="YOUR_ID"
         data-amount="10.00" /&gt;
  );
}</code></pre>
                    </div>

                    <div id="vue-tab" class="tab-content hidden">
                        <pre><code>&lt;template&gt;
  &lt;div class="stablepay-checkout"
       :data-merchant="merchantId"
       :data-amount="amount" /&gt;
&lt;/template&gt;

&lt;script&gt;
export default {
  data() {
    return {
      merchantId: 'YOUR_ID',
      amount: '10.00'
    }
  },
  mounted() {
    const script = document.createElement('script');
    script.src = 'https://stablepay.com/checkout.js';
    document.body.appendChild(script);
  }
}
&lt;/script&gt;</code></pre>
                    </div>

                    <div class="mt-6 p-4 border-4 border-black">
                        <div class="font-bold text-black mb-2 tracking-wide" style="text-transform: uppercase;" data-i18n="widget.features">FEATURES:</div>
                        <ul class="list-none space-y-2 text-gray-700">
                            <li data-i18n="widget.feature1">★ Works on any website</li>
                            <li data-i18n="widget.feature2">★ Auto-detects MetaMask & Phantom</li>
                            <li data-i18n="widget.feature3">★ Mobile responsive</li>
                            <li data-i18n="widget.feature4">★ Customizable theme</li>
                        </ul>
                    </div>
                </div>

                <div id="hosted-content" class="content-section hidden">
                    <h3 class="text-2xl font-bold mb-3 text-black tracking-wide" style="text-transform: uppercase;" data-i18n="hosted.heading">HOSTED CHECKOUT</h3>
                    <p class="text-gray-700 mb-4" data-i18n="hosted.description">Redirect customers to a StablePay-hosted checkout page.</p>

                    <pre><code>// 1. Create order
const order = await fetch('/api/v1/orders', {
  method: 'POST',
  body: JSON.stringify({
    merchantId: 'YOUR_ID',
    amount: '10.00',
    chain: 'BASE_SEPOLIA'
  })
});

const { id } = await order.json();

// 2. Redirect to checkout
window.location.href =
  `https://stablepay.com/checkout?id=${id}`;</code></pre>

                    <div class="mt-6 p-4 border-4 border-black">
                        <div class="font-bold text-black mb-2 tracking-wide" style="text-transform: uppercase;" data-i18n="hosted.features">FEATURES:</div>
                        <ul class="list-none space-y-2 text-gray-700">
                            <li data-i18n="hosted.feature1">★ No frontend code needed</li>
                            <li data-i18n="hosted.feature2">★ PCI compliant</li>
                            <li data-i18n="hosted.feature3">★ Built-in security</li>
                            <li data-i18n="hosted.feature4">★ Returns to your site</li>
                        </ul>
                    </div>
                </div>

                <div id="api-content" class="content-section hidden">
                    <h3 class="text-2xl font-bold mb-3 text-black tracking-wide" style="text-transform: uppercase;" data-i18n="api.heading">CUSTOM API INTEGRATION</h3>
                    <p class="text-gray-700 mb-4" data-i18n="api.description">Build your own checkout UI using our REST API.</p>

                    <pre><code>// Create order
POST /api/v1/orders
{
  "merchantId": "xxx",
  "amount": "10.00",
  "chain": "BASE_SEPOLIA"
}

// Get order status
GET /api/v1/orders/:orderId

// Confirm payment
POST /api/v1/orders/:orderId/confirm
{
  "txHash": "0xabc..."
}</code></pre>

                    <div class="mt-6 p-4 border-4 border-black">
                        <div class="font-bold text-black mb-2 tracking-wide" style="text-transform: uppercase;" data-i18n="api.features">FEATURES:</div>
                        <ul class="list-none space-y-2 text-gray-700">
                            <li data-i18n="api.feature1">★ Full control over UX</li>
                            <li data-i18n="api.feature2">★ Custom branding</li>
                            <li data-i18n="api.feature3">★ Advanced features</li>
                            <li data-i18n="api.feature4">★ Backend integration</li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- Right: Live Demo -->
            <div class="bg-white border-4 border-black p-8 shadow-brutal">
                <h2 class="text-3xl font-bold mb-4 text-black tracking-wide" style="text-transform: uppercase;" data-i18n="demo.heading">LIVE DEMO</h2>
                <p class="text-gray-700 mb-6" data-i18n="demo.subheading">Try it yourself on Base Sepolia testnet</p>

                <div class="p-4 border-4 border-black mb-6" style="background: #FFF9E5;">
                    <div class="font-bold text-black mb-2 tracking-wide" style="text-transform: uppercase;" data-i18n="demo.testnetTitle">NEED TESTNET USDC?</div>
                    <div class="text-sm text-gray-700" data-i18n="demo.testnetDesc">
                        Get free testnet USDC from the Base Sepolia faucet to test payments.
                    </div>
                </div>

                <div class="mb-6">
                    <label class="block mb-2 font-bold text-black tracking-wide" style="text-transform: uppercase;" data-i18n="demo.amountLabel">AMOUNT (USDC)</label>
                    <input type="number" id="demo-amount" value="10.00" step="0.01" min="0.01"
                           class="w-full px-4 py-3 bg-white text-black font-bold text-lg focus:outline-none">
                </div>

                <div class="mb-6">
                    <label class="block mb-2 font-bold text-black tracking-wide" style="text-transform: uppercase;" data-i18n="demo.chainLabel">CHAIN</label>
                    <select id="demo-chain" class="w-full px-4 py-3 bg-white text-black font-bold focus:outline-none">
                        <option value="BASE_SEPOLIA">BASE SEPOLIA (TESTNET)</option>
                        <option value="ETHEREUM_SEPOLIA">ETHEREUM SEPOLIA (TESTNET)</option>
                        <option value="BASE_MAINNET">BASE MAINNET</option>
                        <option value="ETHEREUM_MAINNET">ETHEREUM MAINNET</option>
                    </select>
                </div>

                <div class="border-4 border-black p-8 mb-6" style="background: linear-gradient(135deg, #E3F2FD 0%, #F3E5F5 100%);">
                    <div class="text-center">
                        <div class="text-6xl mb-4">$</div>
                        <div class="text-4xl font-bold text-black mb-4" id="display-amount">10.00</div>
                        <div class="text-gray-700 font-bold mb-6 tracking-wide" style="text-transform: uppercase;">
                            <span data-i18n="demo.chain">CHAIN:</span> <span id="display-chain">BASE SEPOLIA</span>
                        </div>
                        <button class="w-full px-6 py-4 font-bold tracking-wide btn-brutal text-black" style="text-transform: uppercase; background: #00E5FF;" onclick="connectWallet()" data-i18n="demo.connectBtn">
                            CONNECT WALLET
                        </button>
                        <div class="mt-4 text-xs text-gray-500 tracking-wide" style="text-transform: uppercase;" data-i18n="demo.powered">
                            POWERED BY STABLEPAY
                        </div>
                    </div>
                </div>

                <div class="flex gap-4">
                    <button class="flex-1 px-6 py-3 font-bold tracking-wide btn-brutal text-black" style="text-transform: uppercase; background: #4FC3F7;" onclick="updateWidget()" data-i18n="demo.updateBtn">
                        UPDATE WIDGET
                    </button>
                    <button class="flex-1 px-6 py-3 font-bold tracking-wide btn-brutal text-black" style="text-transform: uppercase; background: #E5E5E5;" onclick="resetWidget()" data-i18n="demo.resetBtn">
                        RESET
                    </button>
                </div>
            </div>
        </div>

        <div class="text-center mt-10">
            <p class="text-white text-lg">
                <span data-i18n="footer.need">Need help? Check out the</span>
                <a href="/dashboard.html" class="font-bold underline" data-i18n="footer.link">Developer Dashboard</a>
                <span data-i18n="footer.docs">for complete documentation</span>
            </p>
        </div>
    </div>

    <script>
        // Tab switching
        document.querySelectorAll('.tab-btn').forEach(tab => {
            tab.addEventListener('click', () => {
                const tabName = tab.dataset.tab;
                const parent = tab.closest('.content-section');

                parent.querySelectorAll('.tab-btn').forEach(t => t.classList.remove('active'));
                tab.classList.add('active');

                parent.querySelectorAll('.tab-content').forEach(content => {
                    if (content.id === `${tabName}-tab`) {
                        content.classList.remove('hidden');
                    } else {
                        content.classList.add('hidden');
                    }
                });
            });
        });

        // Integration type switching
        document.querySelectorAll('.integration-type').forEach(type => {
            type.addEventListener('click', () => {
                const typeName = type.dataset.type;

                document.querySelectorAll('.integration-type').forEach(t => t.classList.remove('active'));
                type.classList.add('active');

                document.querySelectorAll('.content-section').forEach(content => {
                    content.classList.add('hidden');
                });

                document.getElementById(`${typeName}-content`).classList.remove('hidden');
            });
        });

        // Widget demo controls
        function updateWidget() {
            const amount = document.getElementById('demo-amount').value;
            const chain = document.getElementById('demo-chain').value;
            document.getElementById('display-amount').textContent = amount;
            document.getElementById('display-chain').textContent = chain.replace('_', ' ');
        }

        function resetWidget() {
            document.getElementById('demo-amount').value = '10.00';
            document.getElementById('demo-chain').value = 'BASE_SEPOLIA';
            updateWidget();
        }

        function connectWallet() {
            alert('This is a demo placeholder!\n\nThe real widget will:\n1. Detect MetaMask or Phantom\n2. Connect your wallet\n3. Prompt you to sign the transaction\n4. Confirm payment on-chain\n\nCheck the Developer Dashboard for implementation details.');
        }

        // Update display on input change
        document.getElementById('demo-amount').addEventListener('input', (e) => {
            document.getElementById('display-amount').textContent = e.target.value;
        });

        document.getElementById('demo-chain').addEventListener('change', (e) => {
            document.getElementById('display-chain').textContent = e.target.value.replace('_', ' ');
        });

        // i18n functionality
        let currentLang = localStorage.getItem('preferredLanguage') || 'en';
        let translations = {};

        async function loadTranslations(lang) {
            try {
                const response = await fetch(`./locales/demo-integration-${lang}.json`);
                translations = await response.json();
                applyTranslations();
            } catch (error) {
                console.error('Failed to load translations:', error);
            }
        }

        function applyTranslations() {
            document.querySelectorAll('[data-i18n]').forEach(element => {
                const key = element.getAttribute('data-i18n');
                const keys = key.split('.');
                let value = translations;

                for (const k of keys) {
                    value = value[k];
                    if (!value) break;
                }

                if (value) {
                    if (element.tagName === 'INPUT' || element.tagName === 'TEXTAREA') {
                        element.placeholder = value;
                    } else {
                        element.textContent = value;
                    }
                }
            });
        }

        // Language selector
        document.getElementById('languageSelector').addEventListener('change', (e) => {
            currentLang = e.target.value;
            localStorage.setItem('preferredLanguage', currentLang);
            loadTranslations(currentLang);
        });

        // Set initial language
        document.getElementById('languageSelector').value = currentLang;
        loadTranslations(currentLang);

        // Night mode toggle
        const nightModeToggle = document.getElementById('nightModeToggle');
        const nightIcon = document.querySelector('.night-icon');

        // Check for saved night mode preference
        if (localStorage.getItem('nightMode') === 'true') {
            document.body.classList.add('night-mode');
            nightIcon.textContent = 'DAY';
        }

        nightModeToggle.addEventListener('click', () => {
            document.body.classList.toggle('night-mode');
            const isNightMode = document.body.classList.contains('night-mode');
            localStorage.setItem('nightMode', isNightMode);
            nightIcon.textContent = isNightMode ? 'DAY' : 'NIGHT';
        });
    </script>
</body>
</html>
